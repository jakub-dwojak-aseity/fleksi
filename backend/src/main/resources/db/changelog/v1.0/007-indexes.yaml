databaseChangeLog:
  - changeSet:
      id: 007-create-performance-indexes
      author: fleksi-team
      changes:
        # Shifts - performance indexes for listing and filtering
        - createIndex:
            indexName: idx_shifts_status
            tableName: shifts
            columns:
              - column:
                  name: status
        - createIndex:
            indexName: idx_shifts_starts_at
            tableName: shifts
            columns:
              - column:
                  name: starts_at
        - createIndex:
            indexName: idx_shifts_city
            tableName: shifts
            columns:
              - column:
                  name: city
        - createIndex:
            indexName: idx_shifts_business_id
            tableName: shifts
            columns:
              - column:
                  name: business_id
        
        # Applications - lookup by shift
        - createIndex:
            indexName: idx_applications_shift_id
            tableName: applications
            columns:
              - column:
                  name: shift_id
        - createIndex:
            indexName: idx_applications_user_id
            tableName: applications
            columns:
              - column:
                  name: user_id
        
        # Attendances - lookup by shift and user
        - createIndex:
            indexName: idx_attendances_shift_id
            tableName: attendances
            columns:
              - column:
                  name: shift_id
        - createIndex:
            indexName: idx_attendances_user_id
            tableName: attendances
            columns:
              - column:
                  name: user_id
        
        # Payouts - lookup by user and attendance
        - createIndex:
            indexName: idx_payouts_user_id
            tableName: payouts
            columns:
              - column:
                  name: user_id
        - createIndex:
            indexName: idx_payouts_attendance_id
            tableName: payouts
            columns:
              - column:
                  name: attendance_id
                  
        # Business NIP index for verification
        - createIndex:
            indexName: idx_businesses_nip
            tableName: businesses
            columns:
              - column:
                  name: nip